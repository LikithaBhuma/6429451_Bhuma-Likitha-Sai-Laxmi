<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Local Community Event Portal</title>
  <style>
    /* Welcome Banner Styling */
    #welcomeBanner {
      background-color: blue; 
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 1.2em;
    }

    /* Highlight Class */
    .highlight {
      background-color: pink;
      padding: 2px 5px;
    }

    /* Event Image Styling */
    .event-img {
      width: 100%;
      max-width: 200px;
      border: 3px solid #555;
      border-radius: 8px;
    }

    /* Table Centering and Formatting */
    table {
      margin: 20px auto;
      text-align: center;
    }

    figcaption {
      margin-top: 5px;
      font-weight: bold;
    }

    nav ul {
      list-style-type: none;
      padding: 10px;
      background-color: purple;
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    nav a {
      text-decoration: none;
      color:white;
      font-weight: bold;
    }

    nav a:hover {
      color: gold;
    }

    /*Styling Form*/
    form {
    max-width: 400px;
    margin: 20px auto;
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
    font-weight: bold;
    }

    input, select, textarea, button {
    width: 100%;
    padding: 8px;
    margin-top: 4px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    }

    button {
    background-color: #007BFF;
    color: white;
    border: none;
    font-weight: bold;
    cursor: pointer;
    }

    button:hover {
    background-color: #0056b3;
    }

    output {
    display: block;
    margin-top: 10px;
    font-weight: bold;
    color: green;
    }

    #feedback img {
      transition: width 0.3s ease;
    }

  </style>
</head>
<body>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#events">Events</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="help.html" target="_blank">Help</a></li>
    </ul>
  </nav>

  <!-- Welcome Banner -->
  <div id="welcomeBanner">
    Welcome back, <span class="highlight">Community Member</span>!
    <span style="color: red; font-weight: bold;">Special offer: Free entry to this weekendâ€™s event!</span>
  </div>

  <!-- Main -->
  <main>
    <!-- Home Section -->
    <section id="home">
      <h1 class="highlight">Welcome to the Local Community Event Portal</h1>
      <p>Stay informed and connected with local events and services.</p>
    </section>

    <!-- Events Section -->
    <section id="events">
      <h2>Upcoming Events</h2>
      <p>Check out what's happening in your community.</p>
    </section>

    <!-- Events Gallery Section -->
    <section id="gallery">
      <h2>Community Event Gallery</h2>
      <table>
        <tr>
          <td>
            <figure>
              <img src="images/event1.jpg" alt="Music Night" title="Music Night 2024" class="event-img">
              <figcaption>Music Night</figcaption>
            </figure>
          </td>
          <td>
            <figure>
              <img src="images/event2.jpg" alt="Food Fest" title="Food Festival 2024" class="event-img">
              <figcaption>Food Festival</figcaption>
            </figure>
          </td>
          <td>
            <figure>
              <img src="images/event3.jpg" alt="Art Show" title="Local Art Show" class="event-img">
              <figcaption>Art Exhibition</figcaption>
            </figure>
          </td>
        </tr>
        <tr>
          <td>
            <figure>
              <img src="images/event4.jpg" alt="Tree Plantation" title="Green Initiative" class="event-img">
              <figcaption>Tree Plantation Drive</figcaption>
            </figure>
          </td>
          <td>
            <figure>
              <img src="images/event5.jpg" alt="Health Camp" title="Free Health Camp" class="event-img">
              <figcaption>Health Camp</figcaption>
            </figure>
          </td>
          <td>
            <figure>
              <img src="images/event6.jpg" alt="Book Fair" title="Community Book Fair" class="event-img">
              <figcaption>Book Fair</figcaption>
            </figure>
          </td>
        </tr>
      </table>
    </section>

    <!-- Event Registration Section -->
    <section id="register">
      <h2>Register for an Event</h2>
      <form id="eventForm" onsubmit="handleSubmit(event)">
        <label for="name">Full Name:</label><br>
        <input type="text" id="name" name="name" placeholder="Your name" required autofocus><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" placeholder="you@example.com" required><br><br>

        <label for="date">Event Date:</label><br>
        <input type="date" id="date" name="date" required><br><br>

        <label for="eventType">Event Type:</label><br>
        <select id="eventType" name="eventType" required>
          <option value="">--Select Event--</option>
          <option value="music">Music Night</option>
          <option value="food">Food Festival</option>
          <option value="art">Art Exhibition</option>
          <option value="Tree">Tree Plantation</option>
          <option value="health">Health Camp</option>
          <option value="books">Book Fair</option>
        </select><br><br>

        <label for="message">Message:</label><br>
        <textarea id="message" name="message" placeholder="Any special requests..." rows="4" cols="40"></textarea><br><br>

        <button type="submit">Submit</button>
        <br><br>
        <output id="confirmationMessage"></output>
      </form>
    </section>

    <!-- Event Feedback Section -->
    <section id="feedback">
      <h2>Event Feedback</h2>
        <label for="phone">Phone Number:</label><br>
        <input type="text" id="phone" name="phone" placeholder="10-digit number" onblur="validatePhone()"><br><br>
        <label for="eventSelect">Select Event:</label><br>
        <!--<select id="eventSelect" onchange="showFee()">-->
        <select id="eventSelect" onchange="storeEventPreference()">
          <option value="">--Choose an Event--</option>
          <option value="music" data-fee="100">Music Night</option>
          <option value="food" data-fee="150">Food Festival</option>
          <option value="art" data-fee="120">Art Exhibition</option>
          <option value="Tree" data-fee="90">Tree Plantation</option>
          <option value="health" data-fee="150">Health Camp</option>
          <option value="books" data-fee="100">Book Fair</option>
        </select>
        <p id="eventFee" style="font-weight: bold;"></p>
        <label for="feedbackText">Your Feedback:</label><br>
        <textarea id="feedbackText" rows="4" cols="50" onkeyup="countChars()"></textarea><br>
        <small>Characters: <span id="charCount">0</span></small><br><br>
        <button type="button" onclick="showFeedbackConfirmation()">Submit Feedback</button><br><br>
        <output id="feedbackConfirmation"></output>
      </form>
      <button type="button" onclick="clearPreferences()">Clear Preferences</button>
      <h3>Double-click to enlarge</h3>
      <img id="feedbackImage" src="images/event4.jpg" alt="Sample Event" title="Double-click to Enlarge" style="width:200px; border:2px solid gray;" ondblclick="enlargeImage()">
    </section>

    <!-- Video Invite Section -->
    <section id="videoInvite">
      <h2>You're Invited! Watch Our Promo</h2>
      <video id="promoVideo" width="400" controls oncanplay="videoReady()">
        <source src="videos\promo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p id="videoStatus" style="font-weight: bold; color: green;"></p>
    </section>
    

    
    <!-- Contact Section -->
    <section id="contact">
      <h2>Contact Us</h2>
      <p>Have questions? Reach out to us via email or phone.</p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Local City Council</p>
  </footer>
  
  
  <script>
    /*Event registration form script*/
    function handleSubmit(event) {
      event.preventDefault(); 
      const name = document.getElementById("name").value;
      const eventType = document.getElementById("eventType").value;
      const output = document.getElementById("confirmationMessage");
      output.textContent = `Thank you, ${name}! You have successfully registered for the ${eventType} event.`;
      event.target.reset(); 
    }

    /*Event feedback form*/
    function validatePhone() {
      const phone = document.getElementById('phone').value;
      const pattern = /^[0-9]{10}$/;
      if (!pattern.test(phone)) {
        alert('Please enter a valid 10-digit phone number.');
        document.getElementById('phone').focus();
      }
    }
    function showFee() {
      const select = document.getElementById('eventSelect');
      const fee = select.options[select.selectedIndex].dataset.fee;
      document.getElementById('eventFee').textContent = fee ? `Event Fee: â‚¹${fee}` : '';
    }
    function showFeedbackConfirmation() {
      const output = document.getElementById('feedbackConfirmation');
      output.textContent = "Thank you! Your feedback has been received.";
    }
    function enlargeImage() {
      const img = document.getElementById('feedbackImage');
      img.style.width = img.style.width === "400px" ? "200px" : "400px";
    }
    function countChars() {
      const text = document.getElementById('feedbackText').value;
      document.getElementById('charCount').textContent = text.length;
    }

    /*video script*/
    function videoReady() {
      document.getElementById("videoStatus").textContent = "ðŸŽ¬ Video ready to play!";
    }
    window.onbeforeunload = function (e) {
      const form = document.getElementById("feedbackForm");
      if (form) {
        const isDirty = Array.from(form.elements).some(
          (el) => el.type !== "submit" && el.value.trim() !== ""
        );
        if (isDirty) {
          const message = "You have unsaved feedback. Are you sure you want to leave?";
          e.returnValue = message; 
          return message;          
        }
      }
    };

    /*Saving user preferences*/
    // Store selected event in localStorage
    function storeEventPreference() {
      const selected = document.getElementById("eventSelect").value;
      localStorage.setItem("preferredEvent", selected);
      showFee(); // Update fee display
    }
    // On page load: retrieve and pre-select stored event
    window.onload = function () {
      const savedEvent = localStorage.getItem("preferredEvent");
      if (savedEvent) {
        const dropdown = document.getElementById("eventSelect");
        dropdown.value = savedEvent;
        showFee(); // Update fee display based on saved selection
      }
    };
    // Clear both localStorage and sessionStorage
    function clearPreferences() {
      localStorage.clear();
      sessionStorage.clear();
      alert("Preferences cleared. Reloading...");
      location.reload();
    }


  </script>

</body>
</html>
